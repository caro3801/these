%!TEX root = main.tex

\chapter{Implantation}
\chaptertable

\section{Introduction} 
Cette section présente l'implantation de 3DEvent, la plateforme web de 
manipulation et de visualisation collaborative d'objets 3D réalisée à partir du modèle 
présenté dans le chapitre précédent.

La première partie s'intéresse à l'intégration 
du framework pour proposer une application d'assemblage d'objets 3D. La 
présentation commence avec la description de l'\gls{IU} et des fonctionnalités 
proposées dont le principe de sélection fantôme et le système de visualisation 
flexible reposent sur le système de projection du modèle orienté événements. 
En proposant une application basée sur les standards du web, elle est 
accessible au plus grand nombre sans requérir d'installation et peut évoluer dans 
le temps avec les standards. 
%\blockquote{The power of the Web is in its universality. Access by everyone 
%regardless of disability is an essential aspect}{Tim Berners-Lee.}

La seconde partie présente l'implémentation de l'architecture de communication avec les 
différentes implémentations des acteurs du système, les politiques de connexion et 
l'intergiciel \gls{P2P} qui permettent l'échange de données entre les collaborateurs.

Enfin, la troisième section récapitule et discute les choix techniques pour 
l'interface utilisateur et la partie réseau qui ont été fait dans l'implémentation.


\section{3DEvent : Plateforme web de manipulation collaborative d'objets 3D}
Dans le chapitre précédent, une des contributions présentées correspond au 
modèle orienté événements : le \gls{framework} 3DEvent. 
L'implantation d'un tel système contient plusieurs éléments comme l'éditeur 
web et son interface utilisateur. Les éléments de sensibilisation à la collaboration 
sont également implantés comme le mécanisme de sélection multiple. Enfin, le 
système de visualisation flexible est un composant qui s'intègre du côté de la 
partie lecture en \gls{CQRS} pour proposer un contenu adapté au client. 

\input{41_editeur_web}

\section{Intergiciel P2P pour l'échange de données 3D pour le paradigme 
événementiel}

L'architecture de communication décrite dans le chapitre précédent nécessite 
l'implémentation d'un intergiciel \gls{P2P} compatible avec les besoins liés à la 
3D, le web et la collaboration. Cette section décrit les politiques de connexion 
pour l'éditeur présenté dans la section précédente ainsi que les mécanismes de 
synchronisation nécessaire à l'échange de données dans l'application. 

\input{42_intergiciel_p2p}


\section{Résumé des choix techniques}

\paragraph{TypeScript et JavaScript}
JavaScript est un langage orienté objet à prototype principalement utilisé dans 
les pages web interactives (scripts) mais aussi sur les serveurs (ex: Node.js).
L'application est implémentée en TypeScript. TypeScript est un langage libre et 
open-source développé par Microsoft. C'est un sur-ensemble de \gls{JS}, i.e. il 
peut intégrer du \gls{JS}). Le code écrit en TypeScript est transpilé en \gls{JS} 
pour être interprété par le moteur \gls{JS} d'un navigateur. TypeScript intègre la 
notion de type qui permet d'améliorer et sécuriser la 
production de code \gls{JS}.


\paragraph{Node.js}
Node.js est un environnement d'éxécution \gls{JS} open-source et 
cross-plateforme qui permet d'executer du code \gls{JS} côté serveur. 

\paragraph{Rendu 3D}The 3D visu- alisation is done using the Three.JS library
\paragraph{WebRTC}
Even though WebRTC API is native in some web browsers, the cross browser 
compatibility is not well handled. 
Therefore, in order to ease speci c development such as data processing, we used 
the simple-peer library5 which provides an abstraction level over the web browser 
API guarantee- ing cross browser compatibility. The server instances are based on 
Node.JS and provide HTML and CSS contents. The WebRTC API on Node.JS is 
enabled through the node-webrtc module1.

\paragraph{Base de données NoSQL}\label{p:nosql} L'évolution de 
l'utilisation du web en tant que plateforme applicative a encouragé le changement 
dans le stockage des données pour de nouveaux besoins supportant de larges 
volumes de données (comme les données 3D). Une base de données \gls{NoSQL} 
fournit un schéma libre et dynamique ainsi qu'une API de requête riche pour la 
manipulation de données. De plus, la possibilité d'enrichir un document \og à la volée\fg{} 
facilite l'évolution des objets (3D) et la maintenance.\info{parler de la 
	maintenance?} de l'application.\improve{eventual consistency, scalabilty}
3DEvent intègre un système de persistance sur le long terme caractérisé par une 
base de données \gls{NoSQL}.

La base de données (\gls{NoSQL}) conserve tous les événements qui se
sont produits dans une scène.\improve{voir ce qu'il faut ajouter éventuellement le 
	schéma aussi.} 
La mise en place d'une base de données centralisée apporte de la robustesse au 
système en lui fournissant un référent sans toutefois le surcharger ainsi qu'une 
expérience utilisateur transparente limitant les interruptions de service.



\paragraph{Base de données fonctionnelle pour l'event store}
The long term persistence relies on Event- Store® (Figure 3d), an "open-source, 
functional database with Com- plex Event Processing in JavaScript"6. It stores 
data as a series of immutable events over time, according to event-sourced 
application requirements. It o ers a continuous projection service reacting to 
events as they are written. It is accessed from server instances via HTTP 
protocol. Each exchange of data is serialised in JSON.

\section{Bilan}


